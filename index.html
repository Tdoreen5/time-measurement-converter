<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="styles.css" />
    <title>Time Measurement Converter</title>
    <style>
      :root {
        --bg-color: #ffffff;
        --text-color: #000000;
        --button-bg: #007bff;
        --button-text: #ffffff;
      }

      [data-theme="dark"] {
        --bg-color: #121212;
        --text-color: #ffffff;
        --button-bg: #0d6efd;
        --button-text: #ffffff;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      .container {
        padding: 20px;
        max-width: 600px;
        margin: auto;
      }

      button {
        background-color: var(--button-bg);
        color: var(--button-text);
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
      }

      button:hover {
        opacity: 0.9;
      }

      .theme-toggle {
        float: right;
        margin-top: -40px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        font-weight: bold;
        display: block;
        margin-bottom: 8px;
      }

      input, select {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin-top: 5px;
        border-radius: 8px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }

      .panel {
        margin-top: 30px;
      }

      .countdown {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Time Measurement Converter</h1>
      <button class="theme-toggle" onclick="toggleTheme()">Dark Theme</button>
      <p>Convert time between various units:</p>

      <div class="form-group">
        <label for="timeValue">Enter Time Value:</label>
        <input type="number" id="timeValue" placeholder="Enter a number (e.g. 5)" />
      </div>

      <div class="form-group">
        <label for="fromUnit">From:</label>
        <select id="fromUnit">
          <option value="seconds">Seconds</option>
          <option value="minutes">Minutes</option>
          <option value="hours">Hours</option>
          <option value="days">Days</option>
          <option value="weeks">Weeks</option>
          <option value="months">Months</option>
          <option value="years">Years</option>
        </select>
      </div>

      <div class="form-group">
        <label for="toUnit">To:</label>
        <select id="toUnit">
          <option value="seconds">Seconds</option>
          <option value="minutes">Minutes</option>
          <option value="hours">Hours</option>
          <option value="days">Days</option>
          <option value="weeks">Weeks</option>
          <option value="months">Months</option>
          <option value="years">Years</option>
        </select>
      </div>

      <button onclick="convertTime()">Convert</button>

      <h2>Result:</h2>
      <p id="result">---</p>

      <button onclick="downloadResult()" id="downloadBtn" style="display:none;">Download Result</button>

      <div class="panel">
        <h3>Add or Subtract Time</h3>
        <div class="form-group">
          <label for="operation">Operation:</label>
          <select id="operation">
            <option value="add">Add</option>
            <option value="subtract">Subtract</option>
          </select>
        </div>
        <div class="form-group">
          <label for="addSubtractValue">Amount:</label>
          <input type="number" id="addSubtractValue" placeholder="Enter number" />
        </div>
        <div class="form-group">
          <label for="addSubtractUnit">Unit:</label>
          <select id="addSubtractUnit">
            <option value="hours">Hours</option>
            <option value="minutes">Minutes</option>
            <option value="days">Days</option>
          </select>
        </div>
        <button onclick="addSubtractTime()">Apply</button>
        <p id="modifiedDate"></p>
      </div>

      <div class="panel">
        <h3>Calculate Seconds Since Birth</h3>
        <div class="form-group">
          <label for="dob">Enter Date of Birth:</label>
          <input type="date" id="dob" />
        </div>
        <button onclick="calculateSecondsSinceBirth()">Calculate</button>
        <p id="secondsSinceBirth"></p>
      </div>

      <div class="panel">
        <h3>Countdown to Event</h3>
        <div class="form-group">
          <label for="eventDate">Enter Event Date:</label>
          <input type="datetime-local" id="eventDate" />
        </div>
        <button onclick="countdownToEvent()">Start Countdown</button>
        <p id="countdown"></p>
      </div>
    </div>

    <script>
      function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);

        // Update button text
        const themeButton = document.querySelector(".theme-toggle");
        themeButton.textContent = newTheme === "dark" ? "Light Theme" : "Dark Theme";
      }

      function convertTime() {
        const timeValue = parseFloat(document.getElementById("timeValue").value);
        const fromUnit = document.getElementById("fromUnit").value;
        const toUnit = document.getElementById("toUnit").value;
        let result;

        if (isNaN(timeValue)) {
          result = "Please enter a valid number.";
        } else {
          const conversionRates = {
            seconds: { minutes: 1 / 60, hours: 1 / 3600, days: 1 / 86400, weeks: 1 / 604800, months: 1 / 2592000, years: 1 / 31536000 },
            minutes: { seconds: 60, hours: 1 / 60, days: 1 / 1440, weeks: 1 / 10080, months: 1 / 43200, years: 1 / 525600 },
            hours: { seconds: 3600, minutes: 60, days: 1 / 24, weeks: 1 / 168, months: 1 / 720, years: 1 / 8760 },
            days: { seconds: 86400, minutes: 1440, hours: 24, weeks: 1 / 7, months: 1 / 30.44, years: 1 / 365 },
            weeks: { seconds: 604800, minutes: 10080, hours: 168, days: 7, months: 1 / 4.348, years: 1 / 52.143 },
            months: { seconds: 2592000, minutes: 43200, hours: 720, days: 30.44, weeks: 4.348, years: 1 / 12 },
            years: { seconds: 31536000, minutes: 525600, hours: 8760, days: 365, weeks: 52.143, months: 12 }
          };

          if (fromUnit === toUnit) {
            result = `${timeValue} ${toUnit}`;
          } else {
            result = timeValue * conversionRates[fromUnit][toUnit];
            result = `${result.toFixed(6)} ${toUnit}`;
          }
        }

        document.getElementById("result").textContent = result;
        document.getElementById("downloadBtn").style.display = "block";
      }

      function addSubtractTime() {
        const value = parseInt(document.getElementById("addSubtractValue").value);
        const unit = document.getElementById("addSubtractUnit").value;
        const operation = document.getElementById("operation").value;
        const currentDate = new Date();
        let newDate;

        if (operation === "add") {
          if (unit === "hours") newDate = new Date(currentDate.getTime() + value * 60 * 60 * 1000);
          if (unit === "minutes") newDate = new Date(currentDate.getTime() + value * 60 * 1000);
          if (unit === "days") newDate = new Date(currentDate.getTime() + value * 24 * 60 * 60 * 1000);
        } else if (operation === "subtract") {
          if (unit === "hours") newDate = new Date(currentDate.getTime() - value * 60 * 60 * 1000);
          if (unit === "minutes") newDate = new Date(currentDate.getTime() - value * 60 * 1000);
          if (unit === "days") newDate = new Date(currentDate.getTime() - value * 24 * 60 * 60 * 1000);
        }

        document.getElementById("modifiedDate").textContent = `New Date: ${newDate}`;
      }

      function calculateSecondsSinceBirth() {
        const dob = document.getElementById("dob").value;
        if (dob) {
          const birthDate = new Date(dob);
          const now = new Date();
          const secondsPassed = Math.floor((now - birthDate) / 1000);
          document.getElementById("secondsSinceBirth").textContent = `Seconds since birth: ${secondsPassed}`;
        }
      }

      function countdownToEvent() {
        const eventDate = document.getElementById("eventDate").value;
        if (!eventDate) return;

        const eventDateObj = new Date(eventDate);
        const now = new Date();
        const timeDiff = eventDateObj - now;

        if (timeDiff > 0) {
          const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

          document.getElementById("countdown").textContent = `Time left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        } else {
          document.getElementById("countdown").textContent = "The event has passed!";
        }
      }
    </script>
  </body>
</html>

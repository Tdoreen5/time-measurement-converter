<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="styles.css" />
    <title>Time Measurement Converter</title>
    <style>
      /* Your existing styles are retained */

      :root {
        --bg-color: #ffffff;
        --text-color: #000000;
        --button-bg: #007bff;
        --button-text: #ffffff;
      }

      [data-theme="dark"] {
        --bg-color: #121212;
        --text-color: #ffffff;
        --button-bg: #0d6efd;
        --button-text: #ffffff;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      .container {
        padding: 20px;
        max-width: 600px;
        margin: auto;
      }

      button {
        background-color: var(--button-bg);
        color: var(--button-text);
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
      }

      button:hover {
        opacity: 0.9;
      }

      .theme-toggle {
        float: right;
        margin-top: -40px;
      }

      a {
        display: inline-block;
        margin: 10px 0;
        padding: 10px 20px;
        text-decoration: none;
        color: var(--button-text);
        background-color: var(--button-bg);
        border-radius: 5px;
        font-size: 16px;
        text-align: center;
      }

      a:hover {
        opacity: 0.9;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        font-weight: bold;
        display: block;
        margin-bottom: 8px;
      }

      input, select {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin-top: 5px;
        border-radius: 8px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }

      .panel {
        margin-top: 30px;
      }

      .countdown {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Time Measurement Converter</h1>
      <button class="theme-toggle" onclick="toggleTheme()">Dark Theme</button>

      <!-- Link to history page -->
      <a href="history.html">View Conversion History</a>

      <!-- Link to new Time Units page -->
      <a href="time-units.html">Learn About Time Units</a>

      <p>Convert time between various units:</p>

      <!-- Existing Conversion Form -->
      <div class="form-group">
        <label for="timeValue">Enter Time Value:</label>
        <input type="number" id="timeValue" placeholder="Enter a number (e.g. 5)" />
      </div>

      <div class="form-group">
        <label for="fromUnit">From:</label>
        <select id="fromUnit">
          <option value="seconds">Seconds</option>
          <option value="minutes">Minutes</option>
          <option value="hours">Hours</option>
          <option value="days">Days</option>
          <option value="weeks">Weeks</option>
          <option value="months">Months</option>
          <option value="years">Years</option>
        </select>
      </div>

      <div class="form-group">
        <label for="toUnit">To:</label>
        <select id="toUnit">
          <option value="seconds">Seconds</option>
          <option value="minutes">Minutes</option>
          <option value="hours">Hours</option>
          <option value="days">Days</option>
          <option value="weeks">Weeks</option>
          <option value="months">Months</option>
          <option value="years">Years</option>
        </select>
      </div>

      <button onclick="convertTime()">Convert</button>

      <h2>Result:</h2>
      <p id="result">---</p>

      <button onclick="downloadResult()" id="downloadBtn" style="display:none;">Download Result</button>

      <!-- Existing Add/Subtract Time Section -->
      <div class="panel">
        <h3>Add or Subtract Time</h3>
        <div class="form-group">
          <label for="operation">Operation:</label>
          <select id="operation">
            <option value="add">Add</option>
            <option value="subtract">Subtract</option>
          </select>
        </div>
        <div class="form-group">
          <label for="addSubtractValue">Amount:</label>
          <input type="number" id="addSubtractValue" placeholder="Enter number" />
        </div>
        <div class="form-group">
          <label for="addSubtractUnit">Unit:</label>
          <select id="addSubtractUnit">
            <option value="seconds">Seconds</option>
            <option value="minutes">Minutes</option>
            <option value="hours">Hours</option>
            <option value="days">Days</option>
            <option value="months">Months</option>
            <option value="years">Years</option>
          </select>
        </div>
        <button onclick="addSubtractTime()">Apply</button>
        <p id="modifiedDate"></p>
      </div>

      <!-- Custom Time Units Section (New) -->
      <div class="panel">
        <h3>Add Custom Time Units</h3>
        <div class="form-group">
          <label for="customUnitName">Unit Name:</label>
          <input type="text" id="customUnitName" placeholder="e.g. Decade" />
        </div>
        <div class="form-group">
          <label for="customUnitFactor">Conversion Factor (to seconds):</label>
          <input type="number" id="customUnitFactor" placeholder="e.g. 315569520" />
        </div>
        <button onclick="addCustomUnit()">Add Unit</button>
        <h4>Custom Units:</h4>
        <ul id="customUnitsList"></ul>
      </div>

      <!-- World Time Converter Section (New) -->
      <div class="panel">
        <h3>World Time Converter</h3>
        <div class="form-group">
          <label for="worldTimeValue">Time Value:</label>
          <input type="text" id="worldTimeValue" placeholder="e.g. 10:00 AM" />
        </div>
        <div class="form-group">
          <label for="worldTimeZone">Select Time Zone:</label>
          <select id="worldTimeZone">
            <option value="GMT">GMT</option>
            <option value="EST">EST</option>
            <option value="PST">PST</option>
            <option value="CET">CET</option>
            <option value="IST">IST</option>
          </select>
        </div>
        <button onclick="convertToWorldTime()">Convert</button>
        <p id="convertedWorldTime"></p>
      </div>

      <!-- Existing Time Since Event Section -->
      <div class="panel">
        <h3>Time Since Event</h3>
        <div class="form-group">
          <label for="eventDate">Enter Event Date:</label>
          <input type="datetime-local" id="eventDate" />
        </div>
        <div class="form-group">
          <label for="eventUnit">Select Unit:</label>
          <select id="eventUnit">
            <option value="seconds">Seconds</option>
            <option value="minutes">Minutes</option>
            <option value="hours">Hours</option>
            <option value="days">Days</option>
            <option value="months">Months</option>
            <option value="years">Years</option>
          </select>
        </div>
        <button onclick="calculateTimeSinceEvent()">Calculate</button>
        <p id="timeSinceEvent"></p>
      </div>

      <!-- Existing Countdown Section -->
      <div class="panel">
        <h3>Countdown to Event</h3>
        <div class="form-group">
          <label for="eventDateCountdown">Enter Event Date:</label>
          <input type="datetime-local" id="eventDateCountdown" />
        </div>
        <button onclick="countdownToEvent()">Start Countdown</button>
        <p id="countdown"></p>
      </div>
    </div>

    <script>
      let isDarkTheme = false;

      function toggleTheme() {
        isDarkTheme = !isDarkTheme;
        document.documentElement.setAttribute('data-theme', isDarkTheme ? 'dark' : 'light');
        document.querySelector('.theme-toggle').textContent = isDarkTheme ? 'Light Theme' : 'Dark Theme';
      }

      // Conversion Logic
      function convertTime() {
        const timeValue = document.getElementById('timeValue').value;
        const fromUnit = document.getElementById('fromUnit').value;
        const toUnit = document.getElementById('toUnit').value;
        let result;

        // Conversion factors (seconds as base unit)
        const conversionFactors = {
          seconds: 1,
          minutes: 60,
          hours: 3600,
          days: 86400,
          weeks: 604800,
          months: 2592000,
          years: 31536000,
        };

        // Convert input value to seconds
        const timeInSeconds = timeValue * conversionFactors[fromUnit];

        // Convert seconds to target unit
        result = timeInSeconds / conversionFactors[toUnit];

        // Display result
        document.getElementById('result').textContent = result + ' ' + toUnit;
        document.getElementById('downloadBtn').style.display = 'inline';
      }

      // Download result as a text file
      function downloadResult() {
        const result = document.getElementById('result').textContent;
        const blob = new Blob([result], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'conversion_result.txt';
        link.click();
      }

      // Add/Subtract time logic
      function addSubtractTime() {
        const operation = document.getElementById('operation').value;
        const value = document.getElementById('addSubtractValue').value;
        const unit = document.getElementById('addSubtractUnit').value;

        const currentDate = new Date();

        let modifiedDate;
        if (operation === 'add') {
          modifiedDate = new Date(currentDate.getTime() + value * 1000 * (unit === 'seconds' ? 1 : (unit === 'minutes' ? 60 : (unit === 'hours' ? 3600 : (unit === 'days' ? 86400 : (unit === 'months' ? 2592000 : 31536000))))));
        } else {
          modifiedDate = new Date(currentDate.getTime() - value * 1000 * (unit === 'seconds' ? 1 : (unit === 'minutes' ? 60 : (unit === 'hours' ? 3600 : (unit === 'days' ? 86400 : (unit === 'months' ? 2592000 : 31536000))))));
        }
        document.getElementById('modifiedDate').textContent = 'Modified Date: ' + modifiedDate.toLocaleString();
      }

      // Add custom unit logic
      function addCustomUnit() {
        const customUnitName = document.getElementById('customUnitName').value;
        const customUnitFactor = document.getElementById('customUnitFactor').value;

        if (customUnitName && customUnitFactor) {
          const customUnitList = document.getElementById('customUnitsList');
          const listItem = document.createElement('li');
          listItem.textContent = `${customUnitName}: ${customUnitFactor} seconds`;
          customUnitList.appendChild(listItem);
        }
      }

      // Convert to world time (simple logic for demo)
      function convertToWorldTime() {
        const worldTimeValue = document.getElementById('worldTimeValue').value;
        const worldTimeZone = document.getElementById('worldTimeZone').value;

        // Just a simple simulation of world time conversion
        const currentTime = new Date();
        const offset = {
          GMT: 0,
          EST: -5,
          PST: -8,
          CET: 1,
          IST: 5.5
        }[worldTimeZone];

        currentTime.setHours(currentTime.getHours() + offset);
        document.getElementById('convertedWorldTime').textContent = `Converted Time in ${worldTimeZone}: ${currentTime.toLocaleString()}`;
      }

      // Time since event
      function calculateTimeSinceEvent() {
        const eventDate = document.getElementById('eventDate').value;
        const eventUnit = document.getElementById('eventUnit').value;

        const timeSince = new Date() - new Date(eventDate);
        let result;
        switch (eventUnit) {
          case 'seconds':
            result = Math.floor(timeSince / 1000);
            break;
          case 'minutes':
            result = Math.floor(timeSince / (1000 * 60));
            break;
          case 'hours':
            result = Math.floor(timeSince / (1000 * 60 * 60));
            break;
          case 'days':
            result = Math.floor(timeSince / (1000 * 60 * 60 * 24));
            break;
          case 'months':
            result = Math.floor(timeSince / (1000 * 60 * 60 * 24 * 30)); // Approx. 30 days
            break;
          case 'years':
            result = Math.floor(timeSince / (1000 * 60 * 60 * 24 * 365)); // Approx. 365 days
            break;
        }
        document.getElementById('timeSinceEvent').textContent = `Time since event: ${result} ${eventUnit}`;
      }

      // Countdown to event
      function countdownToEvent() {
        const eventDateCountdown = document.getElementById('eventDateCountdown').value;
        const eventTime = new Date(eventDateCountdown).getTime();

        const countdownInterval = setInterval(function () {
          const now = new Date().getTime();
          const distance = eventTime - now;

          if (distance <= 0) {
            clearInterval(countdownInterval);
            document.getElementById('countdown').textContent = 'Event Started!';
          } else {
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('countdown').textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
          }
        }, 1000);
      }
    </script>
  </body>
</html>
